# 功能规范：[FEATURE NAME]

**功能分支**: `[###-feature-name]`  
**创建时间**: [DATE]  
**状态**: 草稿  
**输入**: 用户描述: "$ARGUMENTS"

## 执行流程（main）
```
1. 从输入解析用户描述
   → 如果为空：ERROR "未提供功能描述"
2. 从描述中提取关键概念
   → 识别：参与者、动作、数据、约束
3. 对每个不清楚的方面：
   → 用 [NEEDS CLARIFICATION: 具体问题] 标记
4. 填写用户场景与测试部分
   → 如果没有清晰用户流程：ERROR "无法确定用户场景"
5. 生成功能需求
   → 每个需求必须可测试
   → 标记有歧义的需求
6. 识别关键实体（如涉及数据）
7. 运行检查清单
   → 如果有 [NEEDS CLARIFICATION]：WARN "规范存在不确定性"
   → 如果发现实现细节：ERROR "移除技术细节"
8. 返回：SUCCESS（规范可用于规划）
```

---

## ⚡ 快速指南
- ✅ 关注用户需要什么以及为什么
- ❌ 避免实现方式（不涉及技术栈、API、代码结构）
- 👥 面向业务相关方而非开发者编写

### 各部分要求
- **必填部分**：每个功能都必须完成
- **可选部分**：仅在相关时包含
- 不适用的部分请直接删除（不要留“N/A”）

### AI 生成须知
从用户提示生成规范时：
1. **标记所有歧义**：对任何需要假设的内容用 [NEEDS CLARIFICATION: 具体问题]
2. **不要猜测**：如未指定（如“登录系统”未说明认证方式），必须标记
3. **像测试者一样思考**：每个模糊需求都应无法通过“可测试且无歧义”检查项
4. **常见未充分说明区域**：
   - 用户类型与权限
   - 数据保留/删除策略
   - 性能目标与规模
   - 错误处理行为
   - 集成需求
   - 安全/合规需求

---

## 用户场景与测试 *(必填)*

### 主要用户故事
[用通俗语言描述主要用户流程]

### 验收场景
1. **Given** [初始状态], **When** [动作], **Then** [期望结果]
2. **Given** [初始状态], **When** [动作], **Then** [期望结果]

### 边界情况
- 当 [边界条件] 时会发生什么？
- 系统如何处理 [错误场景]？

## 需求 *(必填)*

### 功能需求
- **FR-001**: 系统必须 [具体能力，如“允许用户创建账户”]
- **FR-002**: 系统必须 [具体能力，如“校验邮箱地址”]  
- **FR-003**: 用户必须能够 [关键操作，如“重置密码”]
- **FR-004**: 系统必须 [数据需求，如“持久化用户偏好”]
- **FR-005**: 系统必须 [行为，如“记录所有安全事件”]

*不清楚需求的标记示例：*
- **FR-006**: 系统必须通过 [NEEDS CLARIFICATION: 未指定认证方式 - 邮箱/密码、SSO、OAuth？] 认证用户
- **FR-007**: 系统必须保留用户数据 [NEEDS CLARIFICATION: 未指定保留期限]

### 关键实体 *(如涉及数据则包含)*
- **[Entity 1]**: [代表什么，关键属性，不涉及实现]
- **[Entity 2]**: [代表什么，与其他实体的关系]

---

## 审查与验收清单
*GATE: main() 执行时自动检查*

### 内容质量
- [ ] 无实现细节（语言、框架、API）
- [ ] 聚焦用户价值和业务需求
- [ ] 面向非技术相关方编写
- [ ] 所有必填部分已完成

### 需求完整性
- [ ] 无 [NEEDS CLARIFICATION] 标记
- [ ] 需求可测试且无歧义  
- [ ] 成功标准可衡量
- [ ] 范围界定清晰
- [ ] 已识别依赖和假设

---

## 执行状态
*main() 处理时更新*

- [ ] 用户描述已解析
- [ ] 关键概念已提取
- [ ] 歧义已标记
- [ ] 用户场景已定义
- [ ] 需求已生成
- [ ] 实体已识别
- [ ] 检查清单已通过

---

